---
type: 工作
title: 业务安全监控系统：系统部署
date: 2020-05-15
category: 探针

tags:
- php
- 工作
description: 业务安全监控系统：系统部署。主要包含网站环境搭建、域名配置、php rsa开启配置、python环境、爬站工具、日志分析
---
>积硅步至千里--总有一天你会看到不一样的风景，当你坚持不懈含着泪水全力向前！

## 网站环境搭建

1. 安装XAMPP
    在xampp项目路径下，新建 www 目录，将项目放入该目录下

2. 导入数据库
    cmd下 进入 mysqldump.exe 路径，导出数据库 `mysqldump -u root -p ywaqjc > E:/ywaqjc.sql`
    进入mysql控制台，执行 `source E:/ ywaqjc.sql`

## 域名配置

1. 修改hosts文件，绑定域名和IP

2. 内网中，需要在域控服务器上设置

3. 局域网访问设置

## php rsa环境配置

1. php.ini 开启 `extension=php_openssl.dll`

2. 生成密钥的配置信息，此处需要设备环境变量，新建 OPENSSL_CONF ，为php下openssl.conf d的路径（php/extra）；php开启openssl；$config["config"]设置成openssl.conf 的路径报错，设置环境变量可以解决该报错

## 配置python

1. 安装anaconda

设置环境变量  anaconda  anaconda/scripts
修改php内调用python程序的路径
换源

```sh
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/conda-forge/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/msys2/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/bioconda/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/menpo/

conda config --set show_channel_urls yes
```

2. 安装MySQLdb

    在线安装：管理员权限 运行anaconda  ， 执行 `conda install mysql-python`
    离线安装： [MySQL-python](https://pypi.org/project/MySQL-python/#modal-close)
    * conda离线安装: `conda install pyspark-2.2.0.post0.tar.gz`
    * pip  离线安装: `pip install pyspark-2.2.0.post0.tar.gz`

## 配置爬站 HTTrack Website Copier

1. 安装HTTrack Website Copier

2. 修改相关路径：
    * 修改调用程序路径： jk\clonesites.py 文件下 `exepath = "C:\\Program Files\\WinHTTrack\\httrack.exe"`
    * 修改python程序路径： jk\busysGenerate.php 文件下 `$exepath = "C:\\Python27\\python.exe";`

## 日志分析

在服务器上部署日志采集脚本（python）

宵瑞师兄部分
